<?xml version="1.0" encoding="UTF-8" ?>
<class name="Terrain3DMeshAsset" inherits="Resource" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/godotengine/godot/master/doc/class.xsd">
	<brief_description>
	</brief_description>
	<description>
		This class manages meshes used for instancing. There are two broad types of meshes it can host.
		1. Generated Texture Card - this class will generate a QuadMesh. The typical use for this is to create a material in the override material, place a 2D grass texture in the `albedo texture` slot, and enable alpha scissor. This will generate low poly grass.
		2. Scene File - you can provide your own mesh in a scene file, which is specifically a PackedScene (.tscn, .scn, .glb, .fbx, etc). You can override the material if desired. MultiMeshes only support one mesh object, so complex objects like tree trunks and leaves, or a door frame and door either need to be combined into one object with multiple materials, or placed by another method. The system will look for MeshInstance3D nodes in the file to use as Levels of Detail (LODs). Ideally they have suffixes like `LOD0`, `LOD1`. We support up to 10 LODs, but recommend no more than 4.
		[b]Read More:[/b]
		- [b]Tutorial:[/b] [url=https://terrain3d.readthedocs.io/en/stable/docs/instancer.html]Foliage Instancing[/url]
		- [b]Godot Reference:[/b] [url=https://docs.godotengine.org/en/stable/classes/class_multimesh.html]MultiMesh[/url], [url=https://docs.godotengine.org/en/stable/classes/class_meshinstance3d.html#class-meshinstance3d]MultiMeshInstance3D[/url]
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="clear">
			<return type="void" />
			<description>
				Resets this resource to default settings.
			</description>
		</method>
		<method name="get_lod_range" qualifiers="const">
			<return type="float" />
			<param index="0" name="lod" type="int" />
			<description>
				Returns the far visible distance for the specified Level of Detail (LOD). The near visible distance is the LOD range for the next closest LOD.
			</description>
		</method>
		<method name="get_mesh" qualifiers="const">
			<return type="Mesh" />
			<param index="0" name="lod" type="int" default="0" />
			<description>
				Returns the [code skip-lint]Mesh[/code] resource for the specified Level of Detail (LOD).
			</description>
		</method>
		<method name="get_thumbnail" qualifiers="const">
			<return type="Texture2D" />
			<description>
				Returns the thumbnail generated by [Terrain3DAssets].
			</description>
		</method>
		<method name="set_lod_range">
			<return type="void" />
			<param index="0" name="lod" type="int" />
			<param index="1" name="distance" type="float" />
			<description>
				Sets the far visible distance for the specified Level of Detail (LOD).
			</description>
		</method>
	</methods>
	<members>
		<member name="cast_shadows" type="int" setter="set_cast_shadows" getter="get_cast_shadows" enum="GeometryInstance3D.ShadowCastingSetting" default="1">
			Tells the renderer how to cast shadows from this mesh asset onto the terrain and other objects. This sets [code skip-lint]GeometryInstance3D.cast_shadow[/code] on all MultiMeshInstances used by this mesh.
		</member>
		<member name="density" type="float" setter="set_density" getter="get_density" default="10.0">
			Density is used to set the approximate default spacing between instances based on the size of the mesh. When painting meshes on the terrain, mesh density is multiplied by brush strength.
			This value is not tied to any real world unit. It is calculated as [code skip-lint]10.f / mesh-&gt;get_aabb().get_volume()[/code], then clamped to a sane range. If the calculated amount is inappropriate, increase or decrease it here.
		</member>
		<member name="enabled" type="bool" setter="set_enabled" getter="is_enabled" default="true">
			If enabled, MultiMeshInstance3Ds will be generated for this mesh asset.
		</member>
		<member name="fade_margin" type="float" setter="set_fade_margin" getter="get_fade_margin" default="0.0">
			If &gt; 0, sets [code skip-lint]GeometryInstance3D.fade_mode = self[/code], sets this margin in [code skip-lint]GeometryInstance3D.visibility_range_begin_margin[/code] and [code skip-lint]GeometryInstance3D.visibility_range_end_margin[/code] and adjusts the ranges to allow fading between lods.
			Limited to the smaller of half the distance between LOD0 and LOD1, or 64m.
			Currently broken and hidden in the inspector until [url=https://github.com/godotengine/godot/issues/102799]Godot issue #102799[/url] is fixed.
		</member>
		<member name="generated_faces" type="int" setter="set_generated_faces" getter="get_generated_faces" default="2">
			Select if you want the generated texture card to have a single QuadMesh, 2 meshes rotated 90° in a cross, or 3 rotated at 60°.
		</member>
		<member name="generated_size" type="Vector2" setter="set_generated_size" getter="get_generated_size" default="Vector2(1, 1)">
			Sets the base size of the QuadMesh texture card. Increasing this size will expand from bottom, not the middle.
		</member>
		<member name="generated_type" type="int" setter="set_generated_type" getter="get_generated_type" enum="Terrain3DMeshAsset.GenType" default="0">
			If enabled, this mesh asset will be set to a generated QuadMesh to be used as a texture card.
		</member>
		<member name="height_offset" type="float" setter="set_height_offset" getter="get_height_offset" default="0.0">
			Vertically offsets the origin point of the mesh asset. For example, if you have a 2 meter diameter rock with the mesh origin point in the center, but you want all rocks to be sitting on the ground, you could enter 1 or 0.9 here and it will be placed near its edge. You can also adjust this when painting using the tool settings bar; both options are cummulative.
		</member>
		<member name="id" type="int" setter="set_id" getter="get_id" default="0">
			The user settable ID of the mesh. You can change this to reorder meshes in the list.
		</member>
		<member name="last_lod" type="int" setter="set_last_lod" getter="get_last_lod" default="9">
			Sets the farthest Level of Detail (LOD) that will be rendered. Farther LODs (greater than this number) will be ignored.
		</member>
		<member name="last_shadow_lod" type="int" setter="set_last_shadow_lod" getter="get_last_shadow_lod" default="9">
			Sets the farthest Level of Detail (LOD) that will cast shadows. Farther LODs (greater than this number) won't cast shadows. If [member shadow_impostor] is greater than this number, the shadow impostor will still cast shadows.
		</member>
		<member name="lod0_range" type="float" setter="set_lod0_range" getter="get_lod0_range" default="32.0">
			Sets [code skip-lint]GeometryInstance3D.visibility_range_end[/code] on all MultiMeshInstances used by this mesh at the closest Level of Detail (LOD), the most detailed.
			Allows the renderer to cull MMIs beyond this distance. The next LOD level will use this value for its [code skip-lint]GeometryInstance3D.visibility_range_begin[/code].
			Set to 0 to disable culling and see this LOD at any distance.
		</member>
		<member name="lod1_range" type="float" setter="set_lod1_range" getter="get_lod1_range" default="64.0">
			Sets the end visible range for LOD1. See [member lod0_range].
		</member>
		<member name="lod2_range" type="float" setter="set_lod2_range" getter="get_lod2_range" default="96.0">
			Sets the end visible range for LOD2. See [member lod0_range].
		</member>
		<member name="lod3_range" type="float" setter="set_lod3_range" getter="get_lod3_range" default="128.0">
			Sets the end visible range for LOD3. See [member lod0_range].
		</member>
		<member name="lod4_range" type="float" setter="set_lod4_range" getter="get_lod4_range" default="160.0">
			Sets the end visible range for LOD4. See [member lod0_range].
		</member>
		<member name="lod5_range" type="float" setter="set_lod5_range" getter="get_lod5_range" default="192.0">
			Sets the end visible range for LOD5. See [member lod0_range].
		</member>
		<member name="lod6_range" type="float" setter="set_lod6_range" getter="get_lod6_range" default="224.0">
			Sets the end visible range for LOD6. See [member lod0_range].
		</member>
		<member name="lod7_range" type="float" setter="set_lod7_range" getter="get_lod7_range" default="256.0">
			Sets the end visible range for LOD7. See [member lod0_range].
		</member>
		<member name="lod8_range" type="float" setter="set_lod8_range" getter="get_lod8_range" default="288.0">
			Sets the end visible range for LOD8. See [member lod0_range].
		</member>
		<member name="lod9_range" type="float" setter="set_lod9_range" getter="get_lod9_range" default="320.0">
			Sets the end visible range for LOD9. See [member lod0_range].
		</member>
		<member name="lod_count" type="int" setter="" getter="get_lod_count" default="0">
			Provides the detected number of Levels of Detail (LODs) found in the provided scene file or generated mesh. Read only.
		</member>
		<member name="material_overlay" type="Material" setter="set_material_overlay" getter="get_material_overlay">
			This sets [code skip-lint]GeometryInstance3D.material_overlay[/code], which applies an overriding material using [code skip-lint]next_pass[/code] that overlays the base material.
		</member>
		<member name="material_override" type="Material" setter="set_material_override" getter="get_material_override">
			This sets [code skip-lint]GeometryInstance3D.material_override[/code], which replaces the rendered mesh material with this one.
		</member>
		<member name="name" type="String" setter="set_name" getter="get_name" default="&quot;New Mesh&quot;">
			The user specified name for this asset.
		</member>
		<member name="scene_file" type="PackedScene" setter="set_scene_file" getter="get_scene_file">
			Specifies the PackedScene (.tscn, .scn, .glb, .fbx, etc) to load the mesh from. See the top description.
		</member>
		<member name="shadow_impostor" type="int" setter="set_shadow_impostor" getter="get_shadow_impostor" default="0">
			Uses this lower quality Level of Detail (LOD) to calculate shadows (as an impostor) instead of the visible mesh.
			e.g. Normally each LOD casts its own shadows. Given LOD0-3, if [code skip-lint]shadow_impostor = 2[/code] then when LOD0-1 are visible, they are set to no shadows and LOD2 is set to cast shadows only. When LOD2-3 are visible, each casts their own shadow as normal.
			Increase to improve performance by lowering shadow quality.
			Shadow impostors are disabled if this is set to 0 or if [member cast_shadows] is set to shadows only.
		</member>
		<member name="visibility_range" type="float" setter="set_visibility_range" getter="get_lod0_range" default="32.0">
			Deprecated, see [member lod0_range].
		</member>
	</members>
	<signals>
		<signal name="file_changed">
			<description>
				Emitted when [member scene_file] is changed, or if the generated mesh is toggled.
			</description>
		</signal>
		<signal name="id_changed">
			<description>
				Emitted when [member id] is changed.
			</description>
		</signal>
		<signal name="instancer_setting_changed">
			<description>
				Emitted when instancer specific settings are changed on this mesh asset, such as [member cast_shadows] or [member visibility_range], and triggers an instancer rebuild.
			</description>
		</signal>
		<signal name="setting_changed">
			<description>
				Emitted when settings are changed, other than those tracked by other signals.
			</description>
		</signal>
	</signals>
	<constants>
		<constant name="TYPE_NONE" value="0" enum="GenType">
			No generated mesh is in use, likely because a scene file is used.
		</constant>
		<constant name="TYPE_TEXTURE_CARD" value="1" enum="GenType">
			Generates a QuadMesh to be used as a texture card.
		</constant>
		<constant name="TYPE_MAX" value="2" enum="GenType">
			Maximum value for this enum.
		</constant>
	</constants>
</class>
